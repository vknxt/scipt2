-- Carrega a UI Library
local Lib = loadstring(game:HttpGet("https://raw.githubusercontent.com/7yhx/kwargs_Ui_Library/main/source.lua"))()
local UI = Lib:Create{
    Theme = "Dark",
    Size = UDim2.new(0, 600, 0, 450),
    Title = "Roblox ESP & Aimbot"
}

-- Cria abas na interface
local MainTab = UI:Tab{ Name = "Main" }
local ESPSection = MainTab:Section{ Name = "ESP Settings", Column = 1 }
local AimbotSection = MainTab:Section{ Name = "Aimbot Settings", Column = 2 }

-- Adiciona um título e descrição
MainTab:Label{ Text = "Welcome to the ESP & Aimbot Tool" }
MainTab:Label{ Text = "Customize your settings below:" }

-- Variáveis de controle
local espEnabled = false
local aimbotEnabled = false

-- Função para desenhar caixas ao redor dos jogadores
local function drawESP(player)
    if player and player ~= game.Players.LocalPlayer and player.Character then
        local box = Instance.new("BoxHandleAdornment")
        box.Size = Vector3.new(4, 6, 1)
        box.Adornee = player.Character
        box.Color3 = Color3.new(0, 1, 0) -- Cor verde para melhor visibilidade
        box.AlwaysOnTop = true
        box.ZIndex = 10
        box.Transparency = 0.5 -- Transparência para um visual mais suave
        box.Parent = game.Workspace
    end
end

-- Função para atualizar ESP para todos os jogadores
local function updateESP()
    for _, player in pairs(game.Players:GetPlayers()) do
        drawESP(player)
    end
end

-- Função aprimorada de aimbot
local function aimbot()
    local closestPlayer = nil
    local shortestDistance = math.huge

    for _, player in pairs(game.Players:GetPlayers()) do
        if player ~= game.Players.LocalPlayer and player.Character and player.Character:FindFirstChild("Head") then
            local distance = (player.Character.Head.Position - game.Players.LocalPlayer.Character.Head.Position).magnitude
            if distance < shortestDistance then
                closestPlayer = player
                shortestDistance = distance
            end
        end
    end

    if closestPlayer and closestPlayer.Character and closestPlayer.Character:FindFirstChild("Head") then
        local headPosition = closestPlayer.Character.Head.Position
        local localPlayer = game.Players.LocalPlayer
        localPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(localPlayer.Character.HumanoidRootPart.Position, headPosition)
    end
end

-- Botão para ativar/desativar o ESP
ESPSection:Toggle{
    Name = "Enable ESP",
    Default = false,
    Callback = function(state)
        espEnabled = state
        if espEnabled then
            while espEnabled do
                updateESP()
                wait(1)
            end
        else
            -- Limpa as caixas ESP quando desativado
            for _, v in pairs(game.Workspace:GetChildren()) do
                if v:IsA("BoxHandleAdornment") then
                    v:Destroy()
                end
            end
        end
    end
}

-- Botão para ativar/desativar o Aimbot
AimbotSection:Toggle{
    Name = "Enable Aimbot",
    Default = false,
    Callback = function(state)
        aimbotEnabled = state
        if aimbotEnabled then
            while aimbotEnabled do
                aimbot()
                wait(0.1)
            end
        end
    end
}

-- Adiciona sliders para ajustar configurações futuras
ESPSection:Slider{
    Name = "ESP Box Size",
    Min = 1,
    Max = 10,
    Default = 4,
    Callback = function(value)
        -- Ajusta o tamanho da caixa ESP
    end
}

AimbotSection:Slider{
    Name = "Aimbot Sensitivity",
    Min = 0.1,
    Max = 1,
    Default = 0.5,
    Callback = function(value)
        -- Ajusta a sensibilidade do aimbot
    end
}

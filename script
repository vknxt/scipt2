-- Carrega a UI Library com verifica√ß√£o
local success, Lib = pcall(function()
    return loadstring(game:HttpGet("https://raw.githubusercontent.com/7yhx/kwargs_Ui_Library/main/source.lua"))()
end)

if not success or not Lib then
    warn("Erro ao carregar UI Library. Verifique o link e tente novamente.")
    return
end
print("UI Library carregada com sucesso!")

-- Cria a interface gr√°fica
local UI = Lib:Create{
    Theme = "Dark",
    Size = UDim2.new(0, 600, 0, 450),
    Title = "‚≠ê ESP & Aimbot Premium v2.0 ‚≠ê",
    MinimizeKey = Enum.KeyCode.PageUp,
    CloseKey = Enum.KeyCode.Delete
}
if not UI then
    warn("Erro ao criar a interface. Verifique a compatibilidade da UI Library.")
    return
end
print("Interface criada com sucesso!")

-- Configura√ß√£o global
local Config = {
    ESP = {
        Ativado = false,
        Cor = Color3.fromRGB(255, 0, 0),
        Tamanho = Vector3.new(4, 6, 1),
        Transparencia = 0.3,
        AtualizacaoDelay = 0.1,
        MostrarNomes = true,
        MostrarDistancia = true,
        MostrarVida = true
    },
    Aimbot = {
        Ativado = false,
        Sensibilidade = 0.5,
        AlcanceMaximo = 1000,
        MiraNaCabeca = true,
        SuavizacaoMovimento = true,
        AtualizacaoDelay = 0.05
    }
}

-- Cria√ß√£o das abas
local MenuPrincipal = UI:Tab{ Name = "üéØ Principal" }
local MenuConfig = UI:Tab{ Name = "‚öôÔ∏è Configura√ß√µes" }

-- Cria√ß√£o das se√ß√µes
local SecaoESP = MenuPrincipal:Section{ Name = "üëÅÔ∏è ESP", Column = 1 }
local SecaoAimbot = MenuPrincipal:Section{ Name = "üéØ Aimbot", Column = 2 }
local SecaoConfigAvancadas = MenuConfig:Section{ Name = "üîß Configura√ß√µes Avan√ßadas", Column = 1 }

-- Adicionando labels
MenuPrincipal:Label{ Text = "‚ú® Bem-vindo ao ESP & Aimbot Premium v2.0 ‚ú®" }
MenuPrincipal:Label{ Text = "üí´ Sistema otimizado para m√°ximo desempenho" }
MenuPrincipal:Label{ Text = "‚å®Ô∏è PgUp: Minimizar | Del: Fechar" }

-- Fun√ß√£o para desenhar ESP
local function desenharESP(jogador)
    if not (jogador and jogador.Character and jogador.Character:FindFirstChild("HumanoidRootPart") and jogador ~= game.Players.LocalPlayer) then return end
    
    -- Limpa ESP existente
    for _, v in pairs(jogador.Character:GetChildren()) do
        if v:IsA("BoxHandleAdornment") or v:IsA("BillboardGui") then
            v:Destroy()
        end
    end
    
    -- Cria ESP
    local caixa = Instance.new("BoxHandleAdornment")
    caixa.Size = Config.ESP.Tamanho
    caixa.Adornee = jogador.Character
    caixa.Color3 = Config.ESP.Cor
    caixa.AlwaysOnTop = true
    caixa.Transparency = Config.ESP.Transparencia
    caixa.Parent = jogador.Character
end

local function atualizarESP()
    while Config.ESP.Ativado do
        for _, jogador in ipairs(game.Players:GetPlayers()) do
            if jogador ~= game.Players.LocalPlayer then
                desenharESP(jogador)
            end
        end
        task.wait(Config.ESP.AtualizacaoDelay)
    end
end

-- Fun√ß√£o para Aimbot
local function aimbot()
    while Config.Aimbot.Ativado do
        local jogadorLocal = game.Players.LocalPlayer
        if not (jogadorLocal and jogadorLocal.Character and jogadorLocal.Character:FindFirstChild("HumanoidRootPart")) then return end
        
        local alvo, menorDistancia = nil, Config.Aimbot.AlcanceMaximo
        
        for _, jogador in ipairs(game.Players:GetPlayers()) do
            if jogador ~= jogadorLocal and jogador.Character and jogador.Character:FindFirstChild("Head") then
                local distancia = (jogador.Character.Head.Position - jogadorLocal.Character.Head.Position).Magnitude
                if distancia < menorDistancia then
                    alvo = jogador.Character.Head.Position
                    menorDistancia = distancia
                end
            end
        end
        
        if alvo then
            local frameAtual = jogadorLocal.Character.HumanoidRootPart.CFrame
            local frameAlvo = CFrame.new(frameAtual.Position, alvo)
            
            if Config.Aimbot.SuavizacaoMovimento then
                jogadorLocal.Character.HumanoidRootPart.CFrame = frameAtual:Lerp(frameAlvo, Config.Aimbot.Sensibilidade)
            else
                jogadorLocal.Character.HumanoidRootPart.CFrame = frameAlvo
            end
        end
        
        task.wait(Config.Aimbot.AtualizacaoDelay)
    end
end

-- Bot√µes de ativa√ß√£o/desativa√ß√£o
SecaoESP:Toggle{
    Name = "üü¢ Ativar ESP",
    Default = false,
    Callback = function(estado)
        Config.ESP.Ativado = estado
        if estado then
            task.spawn(atualizarESP)
        end
    end
}

SecaoAimbot:Toggle{
    Name = "üéØ Ativar Aimbot",
    Default = false,
    Callback = function(estado)
        Config.Aimbot.Ativado = estado
        if estado then
            task.spawn(aimbot)
        end
    end
}

-- Configura√ß√µes avan√ßadas
SecaoConfigAvancadas:Slider{
    Name = "üìè Tamanho ESP",
    Min = 1,
    Max = 10,
    Default = 4,
    Callback = function(valor)
        Config.ESP.Tamanho = Vector3.new(valor, valor * 1.5, valor * 0.25)
    end
}

SecaoConfigAvancadas:ColorPicker{
    Name = "üé® Cor ESP",
    Default = Color3.fromRGB(255, 0, 0),
    Callback = function(cor)
        Config.ESP.Cor = cor
    end
}

SecaoConfigAvancadas:Slider{
    Name = "‚ö° Sensibilidade Aimbot",
    Min = 0.1,
    Max = 1,
    Default = 0.5,
    Callback = function(valor)
        Config.Aimbot.Sensibilidade = valor
    end
}

SecaoConfigAvancadas:Toggle{
    Name = "üéØ Mirar na Cabe√ßa",
    Default = true,
    Callback = function(estado)
        Config.Aimbot.MiraNaCabeca = estado
    end
}

MenuConfig:Label{ Text = "‚ö†Ô∏è Use com responsabilidade! ‚ö†Ô∏è" }
MenuConfig:Label{ Text = "üìå Vers√£o 2.0.1 - Melhorias e otimiza√ß√µes" }

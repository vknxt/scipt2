--[[
    ╔═══╗─────────╔╗────────╔═══╗
    ║╔═╗║────────╔╝╚╗───────║╔═╗║
    ║╚══╦══╦══╦═╗╠╗╔╬══╦╗╔╗─║╚═╝╠══╦═╗
    ╚══╗║╔═╣║═╣╔╗╣║║║╔╗║╚╝║─║╔══╣╔╗║╔╝
    ║╚═╝║╚═╣║═╣║║║║╚╣╔╗║║║║─║║──║╚╝║║
    ╚═══╩══╩══╩╝╚╝╚═╩╝╚╩╩╩╝─╚╝──╚══╩╝
    
    Premium Script v2.1.0
]]

-- Aguardar carregamento
repeat task.wait() until game:IsLoaded()

-- Serviços
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Camera = workspace.CurrentCamera
local LocalPlayer = Players.LocalPlayer

-- Carregar UI Library
local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/7yhx/kwargs_Ui_Library/main/source.lua"))()

-- Configurações
local Config = {
    ESP = {
        Enabled = false,
        ShowBox = true,
        ShowHealth = true,
        ShowName = true,
        ShowDistance = true,
        BoxColor = Color3.fromRGB(255, 0, 0),
        TextColor = Color3.fromRGB(255, 255, 255)
    },
    Aimbot = {
        Enabled = false,
        TeamCheck = true,
        Smoothness = 0.5,
        AimPart = "Head",
        FOVSize = 100
    }
}

-- Criar Interface
local Window = Library:Window({
    Name = "Premium Script",
    StartupSound = true,
    IntroEnabled = false,
    Icon = "rbxassetid://6034509993",
    Theme = "Dark"
})

-- Criar Abas
local Combat = Window:Tab({
    Name = "Combat",
    Icon = "rbxassetid://7733799682"
})

local Visuals = Window:Tab({
    Name = "Visuals",
    Icon = "rbxassetid://7733774602"
})

local Settings = Window:Tab({
    Name = "Settings",
    Icon = "rbxassetid://7734053495"
})

-- Aba Combat
local AimbotSection = Combat:Section({
    Name = "Aimbot",
    Side = "Left"
})

AimbotSection:Toggle({
    Name = "Enable Aimbot",
    Flag = "AimbotEnabled",
    Default = false,
    Callback = function(Value)
        Config.Aimbot.Enabled = Value
    end
})

AimbotSection:Toggle({
    Name = "Team Check",
    Flag = "TeamCheck",
    Default = true,
    Callback = function(Value)
        Config.Aimbot.TeamCheck = Value
    end
})

AimbotSection:Slider({
    Name = "Smoothness",
    Flag = "AimbotSmoothness",
    Default = 50,
    Min = 1,
    Max = 100,
    Callback = function(Value)
        Config.Aimbot.Smoothness = Value / 100
    end
})

AimbotSection:Dropdown({
    Name = "Aim Part",
    Flag = "AimPart",
    Default = "Head",
    Options = {"Head", "UpperTorso", "HumanoidRootPart"},
    Callback = function(Value)
        Config.Aimbot.AimPart = Value
    end
})

-- Aba Visuals
local ESPSection = Visuals:Section({
    Name = "ESP",
    Side = "Left"
})

ESPSection:Toggle({
    Name = "Enable ESP",
    Flag = "ESPEnabled",
    Default = false,
    Callback = function(Value)
        Config.ESP.Enabled = Value
    end
})

ESPSection:Toggle({
    Name = "Show Box",
    Flag = "ShowBox",
    Default = true,
    Callback = function(Value)
        Config.ESP.ShowBox = Value
    end
})

ESPSection:Toggle({
    Name = "Show Health",
    Flag = "ShowHealth",
    Default = true,
    Callback = function(Value)
        Config.ESP.ShowHealth = Value
    end
})

ESPSection:Toggle({
    Name = "Show Name",
    Flag = "ShowName",
    Default = true,
    Callback = function(Value)
        Config.ESP.ShowName = Value
    end
})

ESPSection:ColorPicker({
    Name = "ESP Color",
    Flag = "ESPColor",
    Default = Color3.fromRGB(255, 0, 0),
    Callback = function(Value)
        Config.ESP.BoxColor = Value
    end
})

-- Aba Settings
local SettingsSection = Settings:Section({
    Name = "Settings",
    Side = "Left"
})

SettingsSection:Button({
    Name = "Reset All Settings",
    Callback = function()
        -- Resetar configurações
        Library:Notify({
            Title = "Settings",
            Content = "All settings have been reset!",
            Duration = 3
        })
    end
})

-- Funções ESP
local function CreateESP(player)
    local esp = {
        Box = Drawing.new("Square"),
        Name = Drawing.new("Text"),
        Health = Drawing.new("Text"),
        Distance = Drawing.new("Text")
    }
    
    esp.Box.Thickness = 1
    esp.Box.Filled = false
    esp.Box.Color = Config.ESP.BoxColor
    esp.Box.Visible = false
    
    esp.Name.Size = 13
    esp.Name.Center = true
    esp.Name.Outline = true
    esp.Name.Color = Config.ESP.TextColor
    esp.Name.Visible = false
    
    esp.Health.Size = 13
    esp.Health.Center = true
    esp.Health.Outline = true
    esp.Health.Color = Config.ESP.TextColor
    esp.Health.Visible = false
    
    esp.Distance.Size = 13
    esp.Distance.Center = true
    esp.Distance.Outline = true
    esp.Distance.Color = Config.ESP.TextColor
    esp.Distance.Visible = false
    
    return esp
end

-- Funções Aimbot
local function GetClosestPlayer()
    local closestPlayer = nil
    local shortestDistance = Config.Aimbot.FOVSize
    
    for _, player in pairs(Players:GetPlayers()) do
        if player == LocalPlayer then continue end
        if Config.Aimbot.TeamCheck and player.Team == LocalPlayer.Team then continue end
        
        local character = player.Character
        if not character then continue end
        
        local humanoid = character:FindFirstChild("Humanoid")
        if not humanoid or humanoid.Health <= 0 then continue end
        
        local part = character:FindFirstChild(Config.Aimbot.AimPart)
        if not part then continue end
        
        local pos, onScreen = Camera:WorldToViewportPoint(part.Position)
        if not onScreen then continue end
        
        local distance = (Vector2.new(pos.X, pos.Y) - Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y/2)).Magnitude
        if distance < shortestDistance then
            closestPlayer = player
            shortestDistance = distance
        end
    end
    
    return closestPlayer
end

-- Loop Principal
RunService.RenderStepped:Connect(function()
    -- Aimbot
    if Config.Aimbot.Enabled and UserInputService:IsKeyDown(Enum.KeyCode.E) then
        local target = GetClosestPlayer()
        if target then
            local character = target.Character
            local part = character:FindFirstChild(Config.Aimbot.AimPart)
            if part then
                local pos = Camera:WorldToViewportPoint(part.Position)
                local targetPos = Vector2.new(pos.X, pos.Y)
                local mousePos = Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y/2)
                mousemoverel(
                    (targetPos.X - mousePos.X) * Config.Aimbot.Smoothness,
                    (targetPos.Y - mousePos.Y) * Config.Aimbot.Smoothness
                )
            end
        end
    end
end)

-- Notificação Inicial
Library:Notify({
    Title = "Script Loaded",
    Content = "Welcome to Premium Script!",
    Duration = 5
}) 

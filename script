-- Configurações gerais do script
local Config = {
    ESP = {
        Ativado = true,  -- Ativar por padrão para testes
        Cor = Color3.fromRGB(0, 255, 0),  -- Mudança de cor para verde
        Tamanho = Vector3.new(5, 7, 1),
        Transparencia = 0.3,  -- Aumentar a transparência
        AtualizacaoDelay = 0.05,  -- Reduzir o delay para atualização mais rápida
        MostrarNomes = true,  -- Adicionar opção para mostrar nomes
        MostrarDistancia = true,  -- Adicionar opção para mostrar distância
        MostrarVida = true,  -- Adicionar opção para mostrar vida
        Estilo = Enum.Material.Neon  -- Mudar estilo para Neon
    },
    Aimbot = {
        Ativado = true,  -- Ativar por padrão para testes
        Sensibilidade = 0.1,  -- Aumentar a sensibilidade
        AlcanceMaximo = 800,  -- Aumentar o alcance máximo
        MiraNaCabeca = true,  -- Adicionar opção para mirar na cabeça
        SuavizacaoMovimento = true,  -- Ativar suavização de movimento
        AtualizacaoDelay = 0.03,  -- Reduzir o delay para atualização mais rápida
        AjusteDeAngulo = 0.2,  -- Aumentar ajuste de ângulo
        SilentAim = true  -- Ativar Silent Aim por padrão
    }
}

-- Função para remover ESP antigo
local function removerESP(jogador)
    if jogador.Character then
        for _, v in pairs(jogador.Character:GetChildren()) do
            if v:IsA("BoxHandleAdornment") or v:IsA("BillboardGui") then
                v:Destroy()
            end
        end
    end
end

-- Função para criar ESP
local function desenharESP(jogador)
    if not (jogador and jogador.Character and jogador.Character:FindFirstChild("HumanoidRootPart") and jogador ~= game.Players.LocalPlayer) then 
        return 
    end
    
    pcall(function()
        removerESP(jogador)
        
        local contorno = Instance.new("BoxHandleAdornment")
        contorno.Size = Config.ESP.Tamanho + Vector3.new(0.5, 0.5, 0.5)  -- Aumentar o tamanho do contorno
        contorno.Adornee = jogador.Character
        contorno.Color3 = Config.ESP.Cor
        contorno.AlwaysOnTop = true
        contorno.ZIndex = 10
        contorno.Transparency = Config.ESP.Transparencia
        contorno.Material = Config.ESP.Estilo
        contorno.Parent = jogador.Character
    end)
end

-- Função para atualizar ESP
local function atualizarESP()
    while Config.ESP.Ativado do
        pcall(function()
            for _, jogador in ipairs(game.Players:GetPlayers()) do
                if jogador ~= game.Players.LocalPlayer then
                    desenharESP(jogador)
                    if Config.ESP.MostrarNomes then
                        -- Adicionar nome do jogador
                        local nomeTag = Instance.new("BillboardGui")
                        nomeTag.Size = UDim2.new(0, 100, 0, 50)
                        nomeTag.Adornee = jogador.Character.Head
                        nomeTag.AlwaysOnTop = true
                        local nomeLabel = Instance.new("TextLabel", nomeTag)
                        nomeLabel.Text = jogador.Name
                        nomeLabel.Size = UDim2.new(1, 0, 1, 0)
                        nomeLabel.BackgroundTransparency = 1
                        nomeLabel.TextColor3 = Color3.new(1, 1, 1)
                        nomeLabel.TextStrokeTransparency = 0.5
                        nomeTag.Parent = jogador.Character.Head
                    end
                end
            end
        end)
        task.wait(Config.ESP.AtualizacaoDelay)
    end
end

task.spawn(atualizarESP)

-- Função para encontrar o jogador mais próximo
local function encontrarJogadorMaisProximo(jogadorLocal)
    local jogadorMaisProximo, menorDistancia = nil, Config.Aimbot.AlcanceMaximo
    
    for _, jogador in ipairs(game.Players:GetPlayers()) do
        if jogador ~= jogadorLocal and jogador.Character and jogador.Character:FindFirstChild("Head") and 
           jogador.Character:FindFirstChild("Humanoid") and jogador.Character.Humanoid.Health > 0 and 
           jogador.Team ~= jogadorLocal.Team then
            
            local distancia = (jogador.Character.Head.Position - jogadorLocal.Character.Head.Position).Magnitude
            if distancia < menorDistancia then
                jogadorMaisProximo = jogador
                menorDistancia = distancia
            end
        end
    end
    
    return jogadorMaisProximo
end

-- Função do Aimbot
local function aimbot()
    local UserInputService = game:GetService("UserInputService")
    UserInputService.InputBegan:Connect(function(input, gameProcessed)
        if input.UserInputType == Enum.UserInputType.MouseButton1 and not gameProcessed then
            while Config.Aimbot.Ativado do
                pcall(function()
                    local jogadorLocal = game.Players.LocalPlayer
                    if not (jogadorLocal and jogadorLocal.Character and jogadorLocal.Character:FindFirstChild("HumanoidRootPart")) then 
                        return 
                    end
                    
                    local jogadorMaisProximo = encontrarJogadorMaisProximo(jogadorLocal)

                    if jogadorMaisProximo and jogadorMaisProximo.Character then
                        local alvo = jogadorMaisProximo.Character.HumanoidRootPart.Position
                        local framePosicaoAtual = jogadorLocal.Character.HumanoidRootPart.CFrame
                        local frameAlvo = CFrame.new(framePosicaoAtual.Position, alvo)
                        
                        if Config.Aimbot.SilentAim then
                            local anguloAjustado = (alvo - framePosicaoAtual.Position).unit * Config.Aimbot.AjusteDeAngulo
                            jogadorLocal.Character.HumanoidRootPart.CFrame = CFrame.new(framePosicaoAtual.Position) * CFrame.Angles(0, math.atan2(anguloAjustado.Z, anguloAjustado.X), 0)
                        else
                            jogadorLocal.Character.HumanoidRootPart.CFrame = frameAlvo
                        end
                    end
                end)
                task.wait(Config.Aimbot.AtualizacaoDelay)
            end
        end
    end)
end

task.spawn(aimbot)

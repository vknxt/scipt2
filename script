-- Carrega a UI Library
local Lib = loadstring(game:HttpGet("https://raw.githubusercontent.com/7yhx/kwargs_Ui_Library/main/source.lua"))()
local UI = Lib:Create{
    Theme = "Dark",
    Size = UDim2.new(0, 700, 0, 500), -- Tamanho aumentado
    Title = "â­ Premium ESP & Aimbot â­"
}

-- Cria abas na interface
local MainTab = UI:Tab{ Name = "ðŸŽ¯ Main" }
local ESPSection = MainTab:Section{ Name = "ðŸ‘ï¸ ESP Settings", Column = 1 }
local AimbotSection = MainTab:Section{ Name = "ðŸŽ¯ Aimbot Settings", Column = 2 }

-- Adiciona um tÃ­tulo e descriÃ§Ã£o com estilo
MainTab:Label{ Text = "âœ¨ Welcome to Premium ESP & Aimbot Tool âœ¨" }
MainTab:Label{ Text = "ðŸ’« Customize your settings for the best experience:" }

-- VariÃ¡veis de controle
local espEnabled = false
local aimbotEnabled = false
local espColor = Color3.fromRGB(0, 255, 0)
local espSize = Vector3.new(4, 6, 1)
local aimbotSensitivity = 0.5

-- FunÃ§Ã£o melhorada para desenhar ESP
local function drawESP(player)
    if player and player ~= game.Players.LocalPlayer and player.Character then
        -- Remove ESP existente
        for _, v in pairs(player.Character:GetChildren()) do
            if v:IsA("BoxHandleAdornment") then
                v:Destroy()
            end
        end
        
        -- Cria nova caixa ESP
        local box = Instance.new("BoxHandleAdornment")
        box.Size = espSize
        box.Adornee = player.Character
        box.Color3 = espColor
        box.AlwaysOnTop = true
        box.ZIndex = 10
        box.Transparency = 0.3
        box.Parent = player.Character
        
        -- Adiciona nome do jogador
        local billboardGui = Instance.new("BillboardGui")
        billboardGui.Size = UDim2.new(0, 100, 0, 40)
        billboardGui.StudsOffset = Vector3.new(0, 3, 0)
        billboardGui.Adornee = player.Character.Head
        billboardGui.Parent = player.Character

        local nameLabel = Instance.new("TextLabel")
        nameLabel.Size = UDim2.new(1, 0, 1, 0)
        nameLabel.BackgroundTransparency = 1
        nameLabel.TextColor3 = espColor
        nameLabel.Text = player.Name
        nameLabel.TextScaled = true
        nameLabel.Parent = billboardGui
    end
end

-- FunÃ§Ã£o melhorada para atualizar ESP
local function updateESP()
    for _, player in pairs(game.Players:GetPlayers()) do
        if player ~= game.Players.LocalPlayer then
            drawESP(player)
        end
    end
end

-- FunÃ§Ã£o aprimorada de aimbot com suavizaÃ§Ã£o
local function aimbot()
    local closestPlayer = nil
    local shortestDistance = math.huge
    local localPlayer = game.Players.LocalPlayer
    
    if not localPlayer.Character or not localPlayer.Character:FindFirstChild("HumanoidRootPart") then
        return
    end

    for _, player in pairs(game.Players:GetPlayers()) do
        if player ~= localPlayer and player.Character and 
           player.Character:FindFirstChild("Head") and 
           player.Character:FindFirstChild("Humanoid") and
           player.Character.Humanoid.Health > 0 then
            
            local distance = (player.Character.Head.Position - localPlayer.Character.Head.Position).magnitude
            if distance < shortestDistance then
                closestPlayer = player
                shortestDistance = distance
            end
        end
    end

    if closestPlayer and closestPlayer.Character then
        local headPosition = closestPlayer.Character.Head.Position
        local currentCFrame = localPlayer.Character.HumanoidRootPart.CFrame
        local targetCFrame = CFrame.new(currentCFrame.Position, headPosition)
        
        -- SuavizaÃ§Ã£o do movimento
        localPlayer.Character.HumanoidRootPart.CFrame = currentCFrame:Lerp(targetCFrame, aimbotSensitivity)
    end
end

-- BotÃµes e controles melhorados
ESPSection:Toggle{
    Name = "ðŸŸ¢ Enable ESP",
    Default = false,
    Callback = function(state)
        espEnabled = state
        if espEnabled then
            spawn(function()
                while espEnabled do
                    updateESP()
                    wait(0.1)
                end
            end)
        else
            -- Limpa todas as caixas ESP
            for _, player in pairs(game.Players:GetPlayers()) do
                if player.Character then
                    for _, v in pairs(player.Character:GetChildren()) do
                        if v:IsA("BoxHandleAdornment") or v:IsA("BillboardGui") then
                            v:Destroy()
                        end
                    end
                end
            end
        end
    end
}

AimbotSection:Toggle{
    Name = "ðŸŽ¯ Enable Aimbot",
    Default = false,
    Callback = function(state)
        aimbotEnabled = state
        if aimbotEnabled then
            spawn(function()
                while aimbotEnabled do
                    aimbot()
                    wait(0.01)
                end
            end)
        end
    end
}

-- ConfiguraÃ§Ãµes avanÃ§adas
ESPSection:Slider{
    Name = "ðŸ“ ESP Box Size",
    Min = 1,
    Max = 10,
    Default = 4,
    Callback = function(value)
        espSize = Vector3.new(value, value * 1.5, value * 0.25)
    end
}

ESPSection:ColorPicker{
    Name = "ðŸŽ¨ ESP Color",
    Default = Color3.fromRGB(0, 255, 0),
    Callback = function(color)
        espColor = color
    end
}

AimbotSection:Slider{
    Name = "âš¡ Aimbot Sensitivity",
    Min = 0.1,
    Max = 1,
    Default = 0.5,
    Callback = function(value)
        aimbotSensitivity = value
    end
}

-- Adiciona informaÃ§Ãµes extras
MainTab:Label{ Text = "âš ï¸ Use responsibly and enjoy! âš ï¸" }
